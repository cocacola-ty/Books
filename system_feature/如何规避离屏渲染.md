### 什么是离屏渲染

离屏渲染是指GPU在当前屏幕缓冲区之外开辟一个缓冲区进行渲染操作。在这个渲染过程中，要先将上下文环境从当前屏幕缓冲区切换到离屏渲染缓冲区，渲染完成之后再切换回去。

而这个上下文环境的切换过程是十分消耗性能的

### 什么情况会产生离屏渲染以及如何规避

1. `shadows`阴影设置
    
    当只设置阴影不设置阴影路径时会产生离屏渲染。所以，解决就是，设置阴影路径。

    或者，插入一个带有阴影的`layer`来显示阴影效果

2. `cornerRadius`和`masksToBounds`同时设置

    解决方案：在子线程画一张圆角图片进行圆角设置。

3. `mask`遮罩

4. `allowsGroupOpacity` 组透明度

    iOS7之后，该属性默认为`YES`。让子视图的透明度和父视图保持一致的作用。

5. `allowsEdgeAntialiasing`
